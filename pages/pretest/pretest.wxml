<view class="page-wrapper">
  <swiper class="swiper-container" current="{{currentTestIndex}}" bindchange="swiperChange">
    <!-- 表1 -->
    <swiper-item>
  <view class="test-container">
    <!-- 头部区域（保持不变） -->
    <view class="test-header" style="position: relative; left: 0rpx; top: 124rpx; height: 321rpx; display: block; box-sizing: border-box">
      <view class="notice_box">
        <view class="notice">
          <text>第一阶段（表1）是全表仅有两种阳性符号（在表头有显示），按相关按钮为选中阳性符号，其他符号按不相关按钮标记。</text>
          <text>注：每阶段的测试时长为五分钟。</text>
        </view>
      </view>

      <text class="title">神经类型调试表1</text>
      <view class="header-decoration"></view>

      <view class="targets-display">
        <view class="points-display">
          <text class="instruction">阳性符号:</text>
          <view class="points-images">
            <block wx:for="{{points}}" wx:key="index">
              <image 
                class="example-image" 
                src="{{'/images/symbols/' + item + '.png'}}" 
                mode="aspectFit"
              />
            </block>
          </view>
        </view>
      </view>
    </view>

    <!-- 图片表格（添加背景颜色绑定） -->
    <view class="table-container" style="position: relative; left: 0rpx; top: 102rpx; height: 984rpx; display: block; box-sizing: border-box">
      <view class="flex-container">
        <!-- 外层循环：行（5行，与数据生成一致） -->
        <view wx:for="{{table1Data}}" wx:key="rowIndex" class="flex-row">
          <!-- 内层循环：列（5列，与数据生成一致） -->
          <view 
            wx:for="{{item}}" 
            wx:key="colIndex" 
            class="flex-item" 
            style="background-color: {{cellBackground[rowIndex][colIndex]}}"  
            bindtap="handleCellTap" 
            data-row="{{rowIndex}}" 
            data-col="{{colIndex}}"
          >
            <image 
              class="cell-image" 
              src="{{'/images/symbols/' + item + '.png'}}"  
              mode="aspectFit"
            />
          </view>
        </view>
      </view>
    </view>

    <!-- 操作按钮（保持不变） -->
    <view class="control-panel" style="position: relative; left: 0rpx; top: -41rpx">
      <button class="btn related-btn" bindtap="handleRelated">相关</button>
      <button class="btn unrelated-btn" bindtap="handleUnrelated">不相关</button>
      <button class="btn invalid-btn" bindtap="handleInvalid">无效</button>
    </view>
  </view>
</swiper-item>


    <!-- 表2 -->
<swiper-item>
  <view class="test-container">
    <!-- 头部区域（修改说明文字，移除阳性符号显示） -->
    <view class="test-header" style="position: relative; top: 124rpx; height: auto; padding-bottom: 40rpx;">
      <view class="notice_box">
        <view class="notice">
          <text>第二阶段（表2）是每两行刷新一组阳性符号，显示在每两行的左侧表头，同样是按相关按钮选中阳性符号，按不相关按钮标记其他符号。</text>
          <text>注：每阶段的测试时长为五分钟。</text>
        </view>
      </view>

      <text class="title">神经类型调试表2</text>
      <view class="header-decoration"></view>
      
      <view class="targets-display">
        <view class="points-display">
          <text class="instruction">阳性符号:</text>
          <view class="points-images">
            <block wx:for="{{points}}" wx:key="index">
              <image 
                class="example-image" 
                src="{{'/images/symbols/' + item + '.png'}}" 
                mode="aspectFit"
              />
            </block>
          </view>
        </view>
      </view>
    </view>

    <!-- 图片表格（改为数据驱动渲染） -->
    <view class="table-container" style="position: relative; left: 0rpx; top: 102rpx; height: 984rpx; display: block; box-sizing: border-box">
      <view class="flex-container">
        <!-- 外层循环： -->
        <view wx:for="{{table1Data}}" wx:key="rowIndex" class="flex-row">
          <!-- 内层循环： -->
          <view wx:for="{{item}}" wx:key="colIndex" class="flex-item" bindtap="handleCellTap" data-row="{{rowIndex}}" data-col="{{colIndex}}">
            <image 
              class="cell-image" 
              src="{{'/images/symbols/' + item + '.png'}}"  
              mode="aspectFit"
            />
          </view>
        </view>
      </view>
    </view>

    
    

    <!-- 操作按钮（保持不变） -->
    <view class="control-panel" style="position: relative; left: 0rpx; top: -41rpx">
      <button class="btn related-btn" bindtap="handleRelated">相关</button>
      <button class="btn unrelated-btn" bindtap="handleUnrelated">不相关</button>
      <button class="btn invalid-btn" bindtap="handleInvalid">无效</button>
    </view>
  </view>
</swiper-item>

    <!-- 表3 -->
    <swiper-item>
      <view class="test-container">
        <view class="test-header">
          <view class="notice_box" style="position: absolute; top: 10px; width: 100%;">
            <view class="notice">
              <text>第三阶段（表3）是在第二阶段的基础上增加了一个特殊符号（其显示在表头），在按相关按钮选中阳性符号、不相关按钮标记其他符号的基础上，增加了一个当特殊符号后紧跟的是阳性符号时，需按无效按钮标记的操作。</text>
              <text>注：每阶段的测试时长为五分钟。</text>
            </view>
          </view>
          <view class="title" style="margin-top: 100px;">神经类型调试表3</view>
          <view class="header-decoration"></view>
          
          <view class="special-display" style="margin-top: 10px;">
            <text class="instruction">特殊符号:</text>
            <image 
              class="example-image" 
              src="{{'/images/symbols/' + special + '.png'}}" 
              mode="widthFix" 
              style="width: 30px; height: 30px;"
            />
          </view>
        </view>

        <view class="table-container" style="margin-top: 20px; background-color: {{tableBackgroundColor}};">
          <table>
            <thead>
              <tr class="header">
                <th class="points-header">阳性符号</th>
                <th wx:for="{{3}}" wx:key="*this" class="column-header">{{item + 1}}</th>
              </tr>
            </thead>
            <tbody>
              <tr wx:for="{{tableData}}" wx:key="index">
                <td wx:if="{{index % 2 === 0}}" class="row-points-indicator" rowspan="2">
                  <view class="row-points">
                    <block wx:for="{{rowPoints[Math.floor(index / 2)]}}" wx:key="*this">
                      <image 
                        class="example-image" 
                        src="{{'/images/symbols/' + item + '.png'}}" 
                        mode="widthFix" 
                        style="width: 30px; height: 30px;"
                      />
                    </block>
                  </view>
                </td>
                <td wx:for="{{item}}" wx:key="colIndex" class="cell {{selectedCells[index][colIndex] ? 'selected-cell' : ''}} {{currentRow === index && currentCol === colIndex ? 'current-position' : ''}} {{isPointCell(index, item) ? 'point-cell' : ''}} {{item === special ? 'special-cell' : ''}}" bindtap="handleCellTap" data-row="{{index}}" data-col="{{colIndex}}">
                  <image 
                    src="{{'/images/symbols/' + item + '.png'}}" 
                    mode="widthFix" 
                    style="width: 30px; height: 30px;"
                  />
                </td>
              </tr>
            </tbody>
          </table>
        </view>

        <view class="control-panel" style="margin-top: 10px;">
          <button class="btn related-btn" bindtap="handleRelated">相关</button>
          <button class="btn unrelated-btn" bindtap="handleUnrelated">不相关</button>
          <button class="btn invalid-btn" bindtap="handleInvalid">无效</button>
          <button class="btn change-color-btn" bindtap="changeTableColor">改变表格底色</button>
        </view>
      </view>
    </swiper-item>
  </swiper>
</view>